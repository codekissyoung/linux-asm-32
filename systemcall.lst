     1                                  section .text ; 程序段
     2                                  global _start
     3                                  _start:
     4 00000000 90                      	nop
     5                                  Read:
     6 00000001 B803000000                  mov eax, 3              ; 指定 sys_read 系统调用
     7 00000006 BB00000000                  mov ebx, 0              ; 文件描述符 0 
     8 0000000B B9[00000000]                mov ecx, Buff           ; 缓冲区地址为 Buff
     9 00000010 BA00040000                  mov edx, BuffLen        ; 读取字符数 1 byte
    10 00000015 CD80                        int 80H
    11 00000017 89C6                        mov esi, eax            ; 复制系统调用返回值，保存在 esi 中
    12 00000019 83F800                      cmp eax, 0              ; 如果 eax 为0， 说明到了 EOF
    13 0000001C 7438                            je Exit
    14                                  
    15                                  ;   扫描缓冲区，改写小写字符为大写
    16 0000001E BD[00000000]                mov ebp, Buff           ; 基址
    17 00000023 89F1                        mov ecx, esi            ; 保存读入的字节数到 ecx，即为偏移量
    18 00000025 FFC9                        dec ecx                 ; ebp + ecx 是越界地址，所以调整偏移量 ecx - 1
    19                                  Scan:
    20 00000027 67807C0D0061                cmp byte [ebp + ecx], 'a'    ; 字符 < a ，直接输出 
    21 0000002D 720E                            jb Next
    22 0000002F 67807C0D007A                cmp byte [ebp + ecx], 'z'    ; 字符 > z，直接输出
    23 00000035 7706                            ja Next
    24 00000037 67806C0D0020                sub byte [ebp + ecx], 20H    ; a <= 字符 <= z，所以通过 - 20H 转换为大写字符，再输出
    25                                  Next:
    26 0000003D FFC9                        dec ecx
    27 0000003F 75E6                        jnz Scan                     ; 如果还有字符，继续 Scan
    28                                  
    29                                  Write:
    30 00000041 B804000000                  mov eax, 4                  ; sys_write
    31 00000046 BB01000000                  mov ebx, 1                  ; 文件描述符
    32 0000004B B9[00000000]                mov ecx, Buff               ; 缓冲地址
    33 00000050 89F2                        mov edx, esi                ; 写入字节
    34 00000052 CD80                        int 80h
    35 00000054 EBAB                        jmp Read
    36                                  
    37                                  Exit:
    38 00000056 B801000000              	mov eax, 1      ; exit 系统调用号
    39 0000005B BB00000000              	mov ebx, 0      ; return 0
    40 00000060 CD80                    	int 80h         ; 发送中断，开始系统调用
    41                                  
    42                                  section .data       ; 数据段
    43                                  section .bss        ; 保存为被初始化的数据的 .bss 段
    44                                      BuffLen equ 1024
    45 00000000 <res 00000400>              Buff resb BuffLen
